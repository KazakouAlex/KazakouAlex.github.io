function KBmodal(e,a,t,n,r){var o=this;o.name=t,o.contentType=a,o.contentUrl=e,o.closeable=r,void 0!==n&&(o.galleryName=n,o.galleryItems=[]),o.openModal=function(){KBmodal_name=o.name,void 0!==o.galleryName&&createGalleryArray();var e='<div class="KBmodal__opened" modalName="'+o.name+'">';switch(o.contentType){case"yt":e+=generateYoutubeModal();break;case"image":e+=generateImageModal();break;case"gallery":e+=generateGalleryModal();break;case"html":e+=generateHTMLModal();break;default:e+=generateImageModal()}switch(e+="</div>",jQuery("body").append(e),o.contentType){case"yt":resizeModalYt();break;case"image":case"gallery":resizeModalImage();break;default:resizeModalImage()}},o.closeModal=function(){jQuery("[modalName="+o.name+"]").remove()},generateImageModal=function(){var e;return e='<div class="KBmodal__image">',(e+='<img src="'+o.contentUrl+'">')+"</div>"},o.notcloseable=function(){return"0"==o.closeable},generateHTMLModal=function(){var e;return e='<div class="KBmodal__html">',(e+=o.contentUrl)+"</div>"},generateGalleryModal=function(){for(var e=0;e<=o.galleryItems.length-1;e++)o.galleryItems[e]==o.contentUrl&&(KBcurrent_item=e);var a;return a='<div class="KBmodal__image">',a+='<div class="KBgalleryNav KBprev"><i class="fa fa-caret-left" aria-hidden="true"></i></div>',a+='<img src="'+o.contentUrl+'">',(a+='<div class="KBgalleryNav KBnext"><i class="fa fa-caret-right" aria-hidden="true"></i></div>')+"</div>"},generateYoutubeModal=function(){var e;return e='<div class="KBmodal__yt">',(e+='<iframe width="1280" height="720" src="https://www.youtube.com/embed/'+o.contentUrl.replace("https://youtu.be/","")+'?vq=hd1080&autoplay=true" frameborder="0" allowfullscreen></iframe>')+"</div>"},resizeModalImage=function(){var e=jQuery(".KBmodal__image").width(),a=jQuery(".KBmodal__image").height();jQuery(".KBmodal__image img").css({"max-width":e,"max-height":a})},resizeModalYt=function(){var e=jQuery(".KBmodal__yt iframe"),a=jQuery(".KBmodal__yt iframe").width();e.css({height:.5625*a})},createGalleryArray=function(){jQuery("[data-content-gallery="+o.galleryName+"]").each((function(){o.galleryItems.push(jQuery(this).attr("data-content-url"))}))},jQuery(window).resize((function(){switch(o.contentType){case"yt":resizeModalYt();break;case"image":case"gallery":resizeModalImage();break;default:resizeModalImage()}}))}function generateKBmodal(e,a,t,n,r){var o=Math.floor(100*Math.random()+1);if(void 0!==n)var l=n;else l="KBmodal"+o;window[l]=new KBmodal(e,a,l,t,r),window[l].openModal()}function KBprevAction(){"undefined"!=typeof KBcurrent_item&&(KBcurrent_item>0?KBcurrent_item-=1:KBcurrent_item=KBcurrent_item,jQuery('[modalname="'+KBmodal_name+'"]').find("img").attr("src",window[KBmodal_name].galleryItems[KBcurrent_item]))}function KBnextAction(){"undefined"!=typeof KBcurrent_item&&(KBcurrent_item<window[KBmodal_name].galleryItems.length-1?KBcurrent_item+=1:KBcurrent_item=KBcurrent_item,jQuery('[modalname="'+KBmodal_name+'"]').find("img").attr("src",window[KBmodal_name].galleryItems[KBcurrent_item]))}function KBcloseAction(e,a){if(void 0!==e)var t=e;else t=KBmodal_name;!a&&window[t].notcloseable()||(window[t].closeModal(),delete window[t],openedModal=null)}jQuery(document).on("click",".KBmodal",(function(){generateKBmodal(jQuery(this).attr("data-content-url"),jQuery(this).attr("data-content-type")?jQuery(this).attr("data-content-type"):"image",jQuery(this).attr("data-content-gallery"),void 0,jQuery(this).attr("data-closable"))})),jQuery(document).on("click",".KBmodal__opened",(function(e){e.stopPropagation(),KBcloseAction()})),jQuery(document).on("click",".KBmodal__html",(function(e){e.stopPropagation()})),jQuery(document).keydown((function(e){switch(e.which){case 37:KBprevAction();break;case 39:KBnextAction();break;case 27:KBcloseAction();break;default:return}e.preventDefault()})),jQuery(document).on("click",".KBprev",(function(e){e.stopPropagation(),KBprevAction()})),jQuery(document).on("click",".KBnext",(function(e){e.stopPropagation(),KBnextAction()}));