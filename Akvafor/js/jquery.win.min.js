!function(n){var i,e=function(e,o){var s=e.closest(".win__row"),c=!1,l=void 0!==i?i:e[0].winOptions;c=!0===l.container?!(!s.find(".win__cell > :first").length||void 0===s.find(".win__cell > :first")[0]||void 0===s.find(".win__cell > :first")[0].winOptions)&&s.find(".win__cell > :first")[0]:"custom"===l.container?s.find(".win__cell > :first")[0]:!(!s.find(".win__content > :first").length||void 0===s.find(".win__content > :first")[0]||void 0===s.find(".win__content > :first")[0].winOptions)&&s.find(".win__content > :first")[0],s.find(".win__close_top").remove(),c&&"function"==typeof c.winOptions.beforeClose&&c.winOptions.beforeClose(s),i.cache&&(n(".win__hidden").length||n("body").append(n('<div class="win__hidden" style="display: none;"></div>')),!0===l.container?!0===l.container||"custom"===l.container?s.find(".win__content > *").appendTo(n(".win__hidden")):s.find(".win__cell > *").appendTo(n(".win__hidden")):!0===l.container||"custom"===l.container?s.find(".win__cell > *").appendTo(n(".win__hidden")):s.find(".win__content > *").appendTo(n(".win__hidden"))),setTimeout((function(){s.remove(),t("close")}),10)},t=function(i){"close"==i?n(".win > div").length||(n(".win").remove(),n("body").removeClass("win-show")):n(".win").length||(n('<div class="win">').appendTo("body"),setTimeout((function(){n("body").addClass("win-show")}),100))},o={init:function(o){var s,c,l;return s=n("html"),c=n(window),l=0,s.height()>c.height()&&(l=window.innerWidth-s.width(),s.attr("style","--scroll-bar:"+l+"px")),this.unbind("_win"),this.each((function(){o=n.extend({cache:!1,afterOpen:!1,beforeClose:!1,closeButton:!0,bgClose:!0,bgColor:"",swipeClose:!1,container:!1,cssreset:!0,class:""},o),t();var s={};s.win=n(this).removeClass("hide"),s.win[0].winOptions=o,o.container&&"custom"!==o.container?(s.html=n('<div class="win__row"><div class="win__cell"><div class="win__content '+o.class+'"></div></div></div>'),s.html.find(".win__content").append(s.win)):(s.html=n('<div class="win__row"><div class="win__cell '+o.class+'"></div></div>'),s.html.find(".win__cell").append(s.win)),s.html.prependTo(".win"),s.win.show(),o.closeButton&&(s.win.append(n('<span class="win__close win__close_top"></span>')),s.html.find(".win__close").off().on("click",(function(i){"#"==n(this).attr("href")&&i.preventDefault(),e(n(this))}))),"function"==typeof o.afterOpen&&o.afterOpen(event),o.cssreset&&n(".win").addClass("css__reset"),o.bgClose&&(n(".win").hasClass("init").length||n(".win").addClass("init").on("click",(function(i){n(i.target).hasClass("win__row")&&!n(i.target).closest(".win__row").hasClass("loading")&&e(n(i.target))}))),""!=o.bgColor&&n(".win__content").css("background-color",o.bgColor),i=o}))},close:function(){var i=this;setTimeout((function(){i.each((function(){e(n(this))}))}),100)}};n.fn._win=function(i,e){return o[i]?o[i].apply(this,Array.prototype.slice.call(arguments,1),e):"object"!=typeof i&&i?void n.error("Метод "+i+" не существует в jQuery._win"):o.init.apply(this,arguments)}}(jQuery);